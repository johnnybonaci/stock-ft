<?xml version="1.0"?>
<ruleset name="Coding Standard">


    <arg name="basepath" value="."/>
    <arg name="colors"/>
    <arg value="sp"/>
    <arg name="extensions" value="php"/>


    <config name="report" value="full"/>
    <config name="ignore_warnings_on_exit" value="1"/>
    <config name="ignore_errors_on_exit" value="1"/>
    <config name="show_warnings" value="1"/>
    <config name="report_format" value="summary"/>


    <file>./bin</file>
    <file>./src</file>
    <file>./tests</file>
    <file>./config</file>
    <file>./public/index.php</file>


    <!-- PSR-12 rules -->
    <rule ref="PSR12"/>


    <!-- Squiz rules -->
    <rule ref="Squiz">
        <exclude name="Squiz.Commenting.ClosingDeclarationComment"/>
    </rule>
    <rule ref="Squiz.Commenting.ClassComment">
        <exclude name="Squiz.Commenting.ClassComment.TagNotAllowed"/>
        <type>warning</type>
        <exclude-pattern>*/tests/</exclude-pattern>
    </rule>
    <rule ref="Squiz.Commenting.ClassComment.Missing">
        <type>warning</type>
    </rule>
        <!--https://pear.php.net/reference/PHP_CodeSniffer-0.9.0/PHP_CodeSniffer/Squiz_Sniffs_Commenting_ClassCommentSniff.html-->
    <rule ref="Squiz.Commenting.FunctionComment.Missing">
        <type>warning</type>
        <exclude-pattern>*/config/</exclude-pattern>
    </rule>
    <rule ref="Squiz.Commenting.FunctionComment.MissingParamTag">
        <type>warning</type>
    </rule>
    <rule ref="Squiz.Commenting.FunctionComment.MissingParamComment">
        <type>warning</type>
    </rule>
    <rule ref="Squiz.Commenting.FunctionComment.ParamCommentNotCapital">
        <type>warning</type>
    </rule>


    <!-- PSR2 rules -->

    <rule ref="PSR2">
        <!--Rule disabled in order to allow reader-friendly multi-line conditions in 'if' statements-->
        <!--https://github.com/squizlabs/PHP_CodeSniffer/issues/1829-->
        <exclude name="PSR2.ControlStructures.ControlStructureSpacing.SpacingAfterOpenBrace"/>
    </rule>


    <!-- Generic rules -->

    <!--https://pear.php.net/reference/PHP_CodeSniffer-0.9.0/PHP_CodeSniffer/PEAR_Sniffs_Commenting_FunctionCommentSniff.html-->
    <rule ref="Generic.Metrics.CyclomaticComplexity">
        <properties>
            <property name="absoluteComplexity" value="50"/>
        </properties>
    </rule>
    <!--https://pear.php.net/reference/PHP_CodeSniffer-0.9.0/PHP_CodeSniffer/Generic_Sniffs_Metrics_CyclomaticComplexitySniff.html-->
    <rule ref="Generic.Metrics.NestingLevel">
        <properties>
            <property name="nestingLevel" value="3"/>
            <property name="absoluteNestingLevel" value="4"/>
        </properties>
    </rule>
    <!--https://pear.php.net/reference/PHP_CodeSniffer-0.9.0/PHP_CodeSniffer/Generic_Sniffs_Metrics_NestingLevelSniff.html-->
</ruleset>
